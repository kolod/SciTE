<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="generator" content="HTML Tidy, see www.w3.org" />
    <meta name="generator" content="SciTE" />
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
    <title>SciTE Ru-Board Kernel Changes</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body bgcolor="#FFFFFF" text="#000000">
  <table bgcolor="#000000" width="100%" cellspacing="0" cellpadding="0" border="0" class="tmenu">
    <tr>
      <td><img src="SciTEIco.png" height="64" width="64" alt="Scintilla icon"></td>
      <td width="100%"><font size="5">SciTE Ru-Board Kernel Changes</font></td>
    </tr>
  </table>

  <table bgcolor="#CCCCCC" width="100%" cellspacing="0" cellpadding="8" border="0" class="tmenu">
    <tr><td>
      <a href="SciTEDoc_rus.html">Документация</a>&nbsp;&nbsp;
      <a href="SciTEFAQ_rus.html">FAQ</a>&nbsp;&nbsp;
      <a href="SciTERegEx_rus.html">Регулярные выражения</a>&nbsp;&nbsp;
      <a href="SciTELua_rus.html">LUA</a>&nbsp;&nbsp;
      <a href="SciTEDirector_rus.html">SciTE Director</a>&nbsp;&nbsp;
      <a href="CommandValuesExt_rus.html">Команды SciTE и Scintilla</a>&nbsp;&nbsp;
      <a href="SciTE-Ru_Pack_rus.html">Сборка Ru-Board</a>&nbsp;&nbsp;
      <nobr>Ядро SciTE-Ru</nobr>&nbsp;&nbsp;
      <a href="../tools/LuaLib/shell_rus.html">Shell</a>&nbsp;&nbsp;
      <a href="../tools/Helper/SciTE.Helper_rus.html">SciTE Helper</a>&nbsp;&nbsp;
      <a href="ScintillaHistory_rus.html">История</a>
    </td></tr>
  </table>

    <h1>Текстовый редактор SciTE RU-Board 1.78 .64</h1>

    <p>Все модификации оригинального кода редактора <A href="http://www.scintilla.org">SciTE</A> выполнены энтузиастами <A href="http://forum.ru-board.com/topic.cgi?forum=5&topic=24956&glp">форума Ru-Board</A>.

    <br>Данный файл содержит полный список всех доработок кода относительно исходной версии редактора.
    <br>Все изменения, внесенные в код редактора, помечались характерными комментариями, что позволяет при желании применить к оригинальному коду любое из них по отдельности.
    <br>Демонстрацию работы обновленного редактора с многочисленными примерами использования его расширенных возможностей, вы можете увидеть, загрузив <A href="http://scite.net.ru">пакет SciTE-Ru</A>.

    <p>Для удобства восприятия список разбит на три раздела:
    <ul style="margin-top: 5; font-weight:bold">
      <li><a href="#1">Интерфейс</a></li>
      <li><a href="#2">Расширения</a></li>
      <li><a href="#3">Устранение ошибок</a></li>
    </ul>
    </p>

    <h3>
      <a name="1"></a>
      Интерфейс
    </h3>

<h5 id="find.fillout">
<sup>new</sup>
[find.fillout] <span class=desc>(Авторы: Frank Wunderlich, VladVRO)</span></h5>
Новый параметр <span class="example">find.fillout</span> в .properties, который позволяет задать способ начального заполнения поля в диалоге поиска:<br>
&nbsp; 0 (по умолчанию) - если есть выделение и оно не содержит переводов строк, то использовать его, иначе взять слово рядом с курсором (как это и было ранее),<br>
&nbsp; 1 - использовать выделение, если выделения нет, то оставить поле пустым,<br>
&nbsp; 2 - всегда оставлять поле пустым.

<h5 id="MoreRecentFiles">
<sup>new</sup>
[MoreRecentFiles] <span class=desc>(Автор: Daniel Cardenas)</span></h5>
Список последних открывавшихся файлов можно расширить до 30 пунктов используя новый параметр: <div class="example">save.recent.max=30</div>

<h5 id="save.session.multibuffers.only">
[save.session.multibuffers.only] <span class=desc>(Автор: VladVRO)</span></h5>
Новый параметр в .properties, который позволяет запретить запись файла сессии при выходе из редактора, если открыта только одна вкладка:
<div class="example">save.session.multibuffers.only=1</div>

<h5 id="session.close.buffers.onload">
[session.close.buffers.onload] <span class=desc>(Автор: VladVRO)</span></h5>
Новый параметр <span class="example">session.close.buffers.onload</span> в .properties позволяет задать закрывать или нет уже открытые файлы при загрузке сессии.<br>
Например, для того что бы вкладки остались открытыми:
<div class="example">session.close.buffers.onload=0</div>
по умолчанию при загрузке сессии все открытые файлы закрываются.

<h5 id="ReadOnlyTabMarker">
[ReadOnlyTabMarker] <span class=desc>(Авторы: Midas, VladVRO)</span></h5>
Добавлена возможность отображать состояние <i>"только для чтения"</i> с помощью доп. символов в имени вкладки, которые задаются в настройках параметром <span class="example">tabbar.readonly.marker</span>, например:
<div class="example">tabbar.readonly.marker= R/O</div>

<h5 id="HighlightCurrFolder">
[HighlightCurrFolder] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлена подсветка текущего блока свертки текста в поле фолдинга.<br>
Новый параметр в настройках для задания цвета подсветки:<br>
<div class="example">fold.highlight.colour=#0099FF</div>
если цвет не задан, подсветка выключается.

<h5 id="TrueTextSelMargin">
[TrueTextSelMargin] <span class=desc>(Автор: VladVRO)</span></h5>
Изменено отображение курсора над левым полем, там где отображаются номера строк, метки и фолдинг.<br>
Курсор меняется на перевернутый указатель только тогда, когда доступна функция выделения текста, иначе курсор принимает свой обычный вид.

<h5 id="SubMenu">
[SubMenu] <span class=desc>(Автор: HSolo, Доработка: Дмитрий Маслов)</span></h5>
Немного изменен вид меню Tools. Теперь встроенные команды отделены от пользовательских разделителями.<br>
В меню Tools теперь возможно вставлять разделители.<br>
Например, <span class="example">command.separator.34.*=1</span> вставляет разделитель перед командой 34.<br>
Так же возможна установка отметки перед выбранным пунктом меню.<br>
Например, так: <span class="example">command.checked.34.*=1</span>.<br>
<br>
Добавлена возможность создания вложенных подменю в меню Tools.<br>
Они создаются вначале меню и отделены от остальных пунктов разделителем.<br>
Сначала задаются названия подменю:
<div class="example">command.submenu.name.2.*=Insert from Text</div>
если они вложены в другое подменю, то задается номер родительского меню:
<div class="example">command.submenu.parent.2.*=4</div>
Затем для команд, входящих в подменю, задается номер родительского меню:
<div class="example">command.parent.6.*=2<br>
command.name.6.*=Date and Time</div>
<br>
Текст всех пунктов меню и подменю Tools русифицируется так же как и основное меню - через файл locale.properties.

<h5 id="ToolsMax">
[ToolsMax] <span class=desc>(Автор: Moon_aka_Sun, VladVRO)</span></h5>
Число допустимых пунктов в меню Tools увеличено до 300.<br>
Для создания пользовательских команд в <span class="example">user.context.menu</span> следует использовать формулу:<br>
пользовательская команда = 9000 + номер этой команды в меню Tools

<h5 id="ExtendedContextMenu">
<sup>updated</sup>
[ExtendedContextMenu] <span class=desc>(Автор: Дмитрий Маслов, VladVRO)</span></h5>
Новые параметры в .properties позволяют ПОЛНОСТЬЮ настроить контекстные меню:<br>
<span class="example">user.context.menu.*</span> - контекстное меню редактора<br>
<span class="example">user.tabcontext.menu.*</span> - контекстное меню вкладок<br>
<span class="example">user.outputcontext.menu.*</span> - контекстное меню консоли<br>
С помощью параметров <span class="example">POPUPBEGIN</span> и <span class="example">POPUPEND</span> возможно создание подменю!<br>
Формат:
<div class="example">user.context.menu.*=\<br>
Имя&nbsp;команды1|IDM_COMMAND1|\<br>
Имя&nbsp;команды2|IDM_COMMAND2|...</div>
Чтобы вставить разделитель нужно оба поля оставить пустыми
<div class="example">user.context.menu.*=\<br>
Имя&nbsp;команды1|IDM_COMMAND1|\<br>
||\<br>
Имя&nbsp;команды2|IDM_COMMAND2|...</div>
Если параметр не задан в настройках, то отображается стандартное контекстное меню.

<h5 id="user.toolbar">
<sup>updated</sup>
[user.toolbar] <span class=desc>(Автор: Дмитрий Маслов, VladVRO)</span></h5>
Новый параметр <span class="example">user.toolbar.*</span> в .properties позволяет ПОЛНОСТЬЮ настроить панель инструментов.<br>
Формат:
<div class="example">user.toolbar.*=\<br>
Всплывающая&nbsp;подсказка1|IDM_COMMAND1|номер&nbsp;иконки1|\<br>
Всплывающая&nbsp;подсказка2|IDM_COMMAND2|номер&nbsp;иконки2|...</div>
Чтобы вставить разделитель нужно все три поля оставить пустыми
<div class="example">user.toolbar.*=\<br>
Всплывающая&nbsp;подсказка1|IDM_COMMAND1|номер&nbsp;иконки1|\<br>
|||\<br>
Всплывающая&nbsp;подсказка2|IDM_COMMAND2|номер&nbsp;иконки2|...</div>
Если параметр не задан в настройках, то отображается стандартный тулбар.<br><br>
Новый параметр в настройках позволяет задать пользовательскую библиотеку с иконками:
<span class="example">user.toolbar.iconlib.*=$(SciteUserHome)\gnome.dll</span>

<h5 id="ToolbarButtonPressed">
<sup>new</sup>
[ToolbarButtonPressed] <span class=desc>(Авторы: UR4LTZ, VladVRO)</span></h5>
Кнопки на панели инструментов теперь могут отображать состояние вкл/откл в зависимости от текущего значения изменяемого кнопкой параметра.<br>
Так по виду (нажата/отжата) таких кнопок как IDM_WRAP, IDM_READONLY, IDM_VIEWSPACE и т.п. можно видеть текущее состояние соответствующих им установок - wrap, read.only, view.whitespace.

<h5 id="FindResultListStyle">
[FindResultListStyle] <span class=desc>(Авторы: VladVRO, Дмитрий Маслов)</span></h5>
Улучшена наглядность строк, выводимых встроенным инструментом для поиска текста в файлах (Ctrl+Shift+F):<br>
- путь до файла в каждой строке результата отображается в сокращенном виде, относительным от каталога поиска,<br>
- в результирующем тексте табуляция заменяется на пробелы, вначале строки пробелы не выводятся, двойные пробелы заменяются одинарными (эта опция отключается, если задать <span class="example">lexer.errorlist.value.separate=2</span>),<br>
- искомая подстрока может быть выделена в строках результата с помощью задания своего стиля отображения:
<div class="example">style.errorlist.30=fore:#000000 ,bold</div>
<br>
Параметр в .properties <span class="example">lexer.errorlist.findliststyle=0</span> позволяет отключить эту возможность.
<br>
<br>
Добавлена возможность выделить искомую подстроку в строках результата внешнего поиска.
Новые параметры в .properties <span class="example">lexer.errorlist.findtitle.begin</span> и <span class="example">lexer.errorlist.findtitle.end</span> позволяют задать формат заголовка поиска.

<h5 id="close.find.window">
[close.find.window] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Новый параметр в .properties<br>
<span class="example">find.replace.closefind=число</span><br>
0 - предотвращает закрытие окна поиска после нажатия на кнопку "Найти", 1 - закрыть окно (обычное поведение по умолчанию).

<h5 id="find.bookmark.disable">
[find.bookmark.disable] <span class=desc>(Автор: dB6)</span></h5>
Новый параметр в .properties<br>
<span class="example">find.bookmark.disable=1</span><br>
Если 1, то при нажатии на кнопку "Пометить все" метки (bookmarks) не устанавливаются.

<h5 id="NewFind-MarkerDeleteAll">
[NewFind-MarkerDeleteAll] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Новый параметр в .properties<br>
<span class="example">find.mark.delete=1</span><br>
Если 1, то при нажатии на кнопку "Пометить все" удаляются все установленные ранее метки (bookmarks) и маркеры.

<h5 id="TabsMoving">
[TabsMoving] <span class=desc>(Автор: VladVRO и Дмитрий Маслов)</span></h5>
В редактор добавлены две новых команды <span class="example">IDM_MOVETABLEFT</span> и <span class="example">IDM_MOVETABRIGHT</span> позволяющие перемещать текущую вкладку. Они доступны в меню Вкладки.<br>
Кроме того реализовано перемещение вкладок с помощью мыши.

<h5 id="TabbarTitleMaxLength">
[TabbarTitleMaxLength] <span class=desc>(Автор: VladVRO)</span></h5>
Новый параметр в .properties<br>
<span class="example">tabbar.title.maxlength=число</span><br>
накладывает ограничение на длину надписи (имя файла) в табе. Если текст надписи длиннее, то он будет урезан и завершен символом "…"

<h5 id="NewBufferPosition">
[NewBufferPosition] <span class=desc>(Автор: VladVRO)</span></h5>
Новый параметр в .properties<br>
<span class="example">buffers.new.position=число</span><br>
0 - открывать новую вкладку в конце списка (default), 1 - следующей за текущей, 2 - в начале списка.

<h5 id="warning.couldnotopenfile.disable">
[warning.couldnotopenfile.disable] <span class=desc>(Автор: mozers)</span></h5>
Новый параметр в .properties<br>
<span class="example">warning.couldnotopenfile.disable=1</span><br>
1 - убирает предупреждение "Не удается открыть файл", появляющееся при открытии несуществующего файла и новый файл с заданным именем создается молча.

<h5 id="ZorderSwitchingOnClose">
[ZorderSwitchingOnClose] <span class=desc>(Автор: VladVRO)</span></h5>
Модификация параметра в .properties<br>
<span class="example">buffers.zorder.switching=1</span><br>
теперь, если установлена в 1, то после закрытия вкладки редактор возвращается к последней открытой до этого.

<h5 id="new_on_dbl_clk">
[new_on_dbl_clk] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Добавлен функционал: На двойной клик по свободному месту справа от вкладок открывается новый файл (а ля FireFox)

<h5 id="close_on_dbl_clk">
[close_on_dbl_clk] <span class=desc>(Автор: Дмитрий Маслов, Moon_aka_Sun, VladVRO)</span></h5>
Добавлен функционал: Закрытие активной вкладки по двойному клику мыши на ней

<h5 id="SetBookmark">
[SetBookmark] <span class=desc>(Автор: Midas)</span></h5>
Установка Bookmark'а по 1 щелчку на панели Bookmark'ов.<br>
Новый параметр в .properties <span class="example">margin.bookmark.by.single.click=0</span> отключает эту возможность

<h5 id="output.caret">
[output.caret] <span class=desc>(Автор: VladVRO)</span></h5>
Новые параметры в .properties<br>
<span class="example">output.caret.fore</span><br>
<span class="example">output.caret.line.back</span><br>
<span class="example">output.caret.line.back.alpha</span><br>
для задания стиля курсора в окне консоли.

<h5 id="NewIcons">
[NewIcons] <span class=desc>(Автор: VladVRO)</span></h5>
Новые иконки для файлов, ассоциированных с SciTE и для файлов сессий.

<h5 id="AbbrevRefactoring">
[AbbrevRefactoring] <span class=desc>(Автор: VladVRO)</span></h5>
Использование символа '|' работает одинаково и для вставки сокращения (Ctrl+Shift+R) и для расшифровки сокращения (Сtrl+B).

<h5 id="VarAbbrev">
[VarAbbrev] <span class=desc>(Автор: mimir, VladVRO)</span></h5>
В списки сокращений (abbrev) можно добавлять пользовательские переменные.<br>
- <span class="example">%SEL%</span> - выделенный текст<br>
- <span class="example">%CLP%</span> - текст из буфера обмена<br>
- <span class="example">%[имя_переменной]%</span> - значение внутренней переменной SciTE (например, CurrentSelection, FileNameExt, SciteDefaultHome и т.п.)<br>
- <span class="example">%GUID%</span> - уникальный GUID нового объекта (идея принадлежит codewarlock1101)<br>
<br>
Так, например, забив в файл abbrev такую строку:
<div class="example">&lt;a+=&lt;a href="%CLP%" title="|"&gt;%SEL%&lt;/a&gt;</div>
Копируем в буфер обмена текст "http://scite.net.ru/"<br>
Пишем "&lt;a+Наш сайт", выделяем текст "Наш сайт", затем нажимаем Сtrl+B - получаем готовую конструкцию:
<div class="example">&lt;a href="http://scite.net.ru/" title="|"&gt;Наш сайт&lt;/a&gt;</div>
где курсор находится на месте символа '<span class="example">|</span>'.<br>
<br>
То же самое получится если написать "Наш сайт" и выделив этот текст, нажать Ctrl+Shift+R и выбрать "&lt;a+" из раскрывающегося списка.<br>
<br>
Новый параметр в .properties<br>
<span class="example">abbrev.preserve.selection=1</span><br>
позволяет вставлять выделенный текст без использования переменной %SEL%.<br>
В этом случае выделенный текст размещается вместо последнего символа '<span class="example">|</span>'.

<h5 id="abbrev.always.update">
[abbrev.always.update] <span class=desc>(Автор: mimir)</span></h5>
Новый параметр в .properties<br>
<span class="example">abbrev.always.update=1</span><br>
позволяет обновлять файл сокращений без перезапуска Scite

<h5 id="AbbrevExpandIncremental">
[AbbrevExpandIncremental] <span class=desc>(Автор: VladVRO)</span></h5>
Новый параметр в .properties<br>
<span class="example">abbrev.expand.incremental=1</span><br>
Изменяет порядок поиска сокращения по Ctrl+B от малого к большему, иначе говоря, сперва берется один символ, потом два и т.д.

<h5 id="AbbrevMaxLength">
[AbbrevMaxLength] <span class=desc>(Автор: VladVRO)</span></h5>
Новый параметр в .properties<br>
<span class="example">abbrev.maximum.length=[число]</span><br>
Задает максимальную длину сокращения, обрабатываемого по Ctrl+B, иначе говоря, максимальную длину текста который будет сравниваться с набором сокращений.

<h5 id="import">
[import] <span class=desc>(Автор: mimir, VladVRO)</span></h5>
Переделан механизм импорта в файлах настроек, теперь редактор сперва делает попытку загрузить файл с явно указанным именем, если не находит, то добавляет расширение ".properties" и повторяет попытку.<br>
Возможно использование директивы <span class="example">import</span> в файлах *.abbrev

<h5 id="selection.hide.on.deactivate">
[selection.hide.on.deactivate] <span class=desc>(Автор: mozers)</span></h5>
Параметр <span class="example">selection.hide.on.deactivate=0</span> позволяет не снимать выделение с текста когда окно SciTE теряет фокус.

<h5 id="scite.userhome">
[scite.userhome] <span class=desc>(Автор: gansA, mozers, VladVRO)</span></h5>
Новый параметр в .properties<br>
<span class="example">scite.userhome</span> позволяет задать путь к каталогу $SciteUserHome для сохранения пользовательских данных (SciTE.recent, SciTE.ses, SciTEUser.properties)<br>
Позволяет использовать в пути внутренние переменные SciTE, например, так:
<div class="example">scite.userhome=$(SciteDefaultHome)\home</div>

<h5 id="IncrementalSearch.AddHotkeys">
[IncrementalSearch.AddHotkeys] <span class=desc>(Автор: Midas)</span></h5>
Добавляет в "<span class="example">Быстрый поиск</span>" (Ctrl+Alt+I) горячие клавиши:<br>
- Enter или F3 - следующее вхождение<br>
- Shift+Enter или Shift+F3 - предыдущее вхождение

<h5 id="WarningMessage">
[WarningMessage] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлена возможность настроить отображение предупреждения для информационных событий редактора (warning), сообщения задаются параметрами:<br>
<span class="example">warning.findwrapped.message=текст сообщения</span><br>
<span class="example">warning.notfound.message=текст сообщения</span><br>
<span class="example">warning.wrongfile.message=текст сообщения</span><br>
<span class="example">warning.executeok.message=текст сообщения</span><br>
<span class="example">warning.executeko.message=текст сообщения</span><br>
<span class="example">warning.nootherbookmark.message=текст сообщения</span>

<h5 id="AutoComplete">
[AutoComplete] <span class=desc>(Автор: mimir, VladVRO)</span></h5>
Функция автозавершения (Ctrl+I, Ctrl+Space) берет варианты завершения слова не только из соответствующего .api файла (как в оригинальном SciTE), но и из редактируемого текста.

<h5 id="oem2ansi">
[oem2ansi] <span class=desc>(Автор: gansA)</span></h5>
Параметр <span class="example">output.code.page.oem2ansi=1</span> включает перекодировку текста, выводимого в окно консоли, из OEM в ANSI.<br>
Это позволяет редактировать скрипт в кодировке win1251 и видеть его вывод в консоли в кодировке dos866 не прибегая к переключению.

<h5 id="caret">
[caret] <span class=desc>(Автор: mimir)</span></h5>
Добавлена возможность настраивать ширину и цвет курсора индивидуально для каждого лексера, например, так:
<div class="example">caret.fore.$(file.patterns.cpp)=#FF0000<br>
caret.width.$(file.patterns.cpp)=3</div>
Это акктуально для тех, у кого для разных языков заданы принципиально отличающиеся цветовые решения, например, с разным (светлым и темным) фоном.

<h5 id="BetterCalltips">
[BetterCalltips] <span class=desc>(Автор: chupakabra)</span></h5>
Новые параметры в .properties<br>
<div class="example">calltip.lexer.automatic<br>
calltip.*.automatic</div>
Yстановка этого параметра в 0 означает что не будет происходить автоматическое отображение окошка с calltip'ом при наборе текста, но останется возможность вызвать его вручную.
<div class="example">calltip.lexer.show.per.page<br>
calltip.*.show.per.page</div>
Возможность указать количество определений, отображаемых одновременно в calltip'е. Значение по умолчанию - 1.
<div class="example">calltip.lexer.word.wrap<br>
calltip.*.word.wrap</div>
Опция включает возможность переноса по словам длинных calltip'ов, её значение определяет максимальный размер строки calltip'а в символах, 0 означает что данная функция будет отключена.<br>
<br>
Если окошко calltip'а по горизонтали выходит за пределы окна редактора (к примеру, если курсор находится близко к правой границе окна), то смещаем горизонтальную позицию calltip таким образом, чтобы на экране было видно максимальное количество информации.<br>
<br>
Добавлена возможность указывать несколько диапазонов подсветки для окошка calltip'а, введены новые команды Scintilla для этих целей (SCI_CALLTIPADDHLT, SCI_CALLTIPCLEARHLT, SCI_CALLTIPUPDATEHLT)

<h5 id="TextSizeMax for Dialog">
[TextSizeMax for Dialog] <span class=desc>(Автор: dB6)</span></h5>
Максимально допустимый размер строки в диалогах поиска и замены увеличен до 1024 байт.

<h5 id="ignore_overstrike_change">
[ignore_overstrike_change] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Новый параметр в .properties<br>
<span class="example">change.overwrite.enable=0</span> включает режим игнорирования переключения режима вставка/замена.<br>
При 1 или отсутствии этого параметра действует режим по умолчанию.<br>
Добавлена возможность установить этот параметр через SCI_SETOVERTYPE<br>
0 - режим вставки (дефолтный)<br>
1 - режим заменты<br>
2 - игнорировать переключение режима<br>
3 - не игнорировать переключение режима (дефолтный)<br>
(через SCI_SETOVERTYPE можно переключать режим независимо от установки игнорирования)

    <h3>
      <a name="2"></a>
      Расширения
    </h3>

<h5 id="IndicatorsFillAlpha">
<sup>new</sup>
[IndicatorsFillAlpha] <span class=desc>(Автор: VladVRO)</span></h5>
Поправлен диапазон значений параметра прозрачности заливки метки (mark) для стиля ROUNDBOX, который может принимать значения от 0 до 255 под Windows OS.<br>
Для работы с ним добавлен интерфейс в API редактора <span class="example">editor.IndicAlpha[num]</span>.

<h5 id="ForthImprovement">
[ForthImprovement] <span class=desc>(Автор: VladVRO)</span></h5>
Улучшены лексеры Forth и Crontab. Добавлен фолдинг и созданы дополнительные группы ключевых слов.<br>
В лексере Forth исправлен алгоритм поиска закрывающего тега для строки <span class="example">[ ]</span>.

<h5 id="BatchLexerImprovement">
[BatchLexerImprovement] <span class=desc>(Автор: VladVRO)</span></h5>
Значительно доработан лексер batch (используется для отображения пакетных файлов *.bat, *.cmd, *.nt).<br>
Исправлена ошибка обработки круглой открывающей скобки.<br>
Круглые скобки теперь отображаются стилем <span class="example">SCE_BAT_OPERATOR</span> и по ним сделан фолдинг.<br>
Добавлено три новых стиля:<br>
 - <span class="example">SCE_BAT_ENVIRONMENT</span> используется для отображения переменных окружения вида <span class="example"><i>%variable%</i></span>,<br>
 - <span class="example">SCE_BAT_EXPANSION</span> используется для отображения переменных окружения вида <span class="example"><i>!variable!</i></span>,<br>
 &nbsp; новый параметр в .properties <span class="example">lexer.batch.enabledelayedexpansion=1</span>
включает подсветку переменных этого вида, по умолчанию она выключена.<br>
 - <span class="example">SCE_BAT_CLABEL</span> используется для отображения указателей на метки вида <span class="example"><i>:name</i></span>,<br>
<br>
Дополнительная информация в <a href="http://code.google.com/p/scite-ru/issues/detail?id=96">Issue 96</a>.

<h5 id="LocalizationFromLua">
[LocalizationFromLua] <span class=desc>(Автор: VladVRO)</span></h5>
В SciTE Lua Scripting Extension добавлена новая команда:<br>
<span class="example">scite.GetTranslation(s, [retainIfNotFound])</span>, которая возвращает перевод строки <span class="example"><i>s</i></span>,<br>
где <span class="example"><i>retainIfNotFound</i></span> - (по умолчанию <span class="example"><i>true</i></span>) указывает на возврат исходного значения в случае, если перевод не найден.<br>
Переводы строк берутся из файла <span class="example">locale.properties</span>.

<h5 id="OnFinalise">
[OnFinalise] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлено новое событие SciTE в Луа API <span class="example">OnFinalise()</span>. Событие возникает при закрытии редактора.

<h5 id="ABAP">
[ABAP] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлен новый лексер для языка ABAP/4.

<h5 id="EditorUnicodeMode">
[EditorUnicodeMode] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлен новый параметр <span class="example">editor.unicode.mode</span> в который редактор сохраняет текущее значение режима двухбитной кодировки, заданного одним из следующего множества значений:
<span class="example">IDM_ENCODING_DEFAULT, IDM_ENCODING_UCS2BE, IDM_ENCODING_UCS2LE, IDM_ENCODING_UTF8, IDM_ENCODING_UCOOKIE</span>.

<h5 id="macro">
[macro] <span class=desc>(Автор: VladVRO)</span></h5>
Поддержка записи и воспроизведения макросов с помощью LUA

<h5 id="OnMenuCommand">
[OnMenuCommand] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлено новое событие SciTE - <span class="example">OnMenuCommand (msg, source)</span><br>
<span class="example">msg</span> - id функции (SCI_constant)<br>
<span class="example">source</span> - является вторым входным параметром внутренней функции редактора MenuCommand.<br>
Он может быть равным IDM_SRCWIN (350) - окно редактора, или IDM_RUNWIN (351) - окно вывода, или еще чему-то тому, где находится фокус.

<h5 id="OnSendEditor">
[OnSendEditor] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлено новое событие SciTE - <span class="example">OnSendEditor (msg, wp, lp)</span><br>
Параметры теже что и у функции SendEditor.<br>
<span class="example">msg</span> - id функции (SCI_constant)<br>
<span class="example">wp</span> и <span class="example">lp</span> - входные параметры для этой функции, причем wp - числовой параметр, lp - текстовый. В зависимости от функции они могут использоваться или нет.<br>
OnSendEditor вызывается для команд доступных для записи в макрос и для SCI_SETREADONLY.<br>
<br>
Пример вызова скрипта для смены регистра:
<div class="example">function OnSendEditor (msg)<br>
&nbsp;&nbsp;if msg == SCI_UPPERCASE then<br>
&nbsp;&nbsp;&nbsp;&nbsp;ChangeCase("U")<br>
&nbsp;&nbsp;elseif msg == SCI_LOWERCASE then<br>
&nbsp;&nbsp;&nbsp;&nbsp;ChangeCase("L")<br>
&nbsp;&nbsp;end<br>
end</div>

<h5 id="OnClick">
[OnClick] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Добавлено новое событие SciTE <span class="example">OnClick()</span>. Событие возникает при одиночном клике мыши в окне редактирования или в окне консоли.<br>
Получает в строке параметров состояния клавиш-модификаторов (Shift, Ctrl, Alt):<br>
<span class="example">function OnClick(shift, ctrl, alt)</span>

<h5 id="OnDoubleClick">
[OnDoubleClick] <span class=desc>(Автор: mimir, Дмитрий Маслов)</span></h5>
Событие <span class="example">OnDoubleClick()</span>, теперь получает состояния клавиш-модификаторов (Shift, Ctrl, Alt):<br>
<span class="example">function OnDoubleClick(shift, ctrl, alt)</span>

<h5 id="OnKey">
[OnKey] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Расширена функция луа <span class="example">OnKey</span>, теперь в нее передается также нажатый символ:<br>
<span class="example">function OnKey(key, shift, ctrl, alt, char)</span>

<h5 id="OnMouseButtonUp">
[OnMouseButtonUp] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлено новое событие SciTE <span class="example">OnMouseButtonUp()</span>. Событие возникает при отжатии кнопки мыши в окне редактирования или в окне консоли.<br>
Получает в строке параметров состояние клавиши-модификатора Ctrl:<br>
<span class="example">function OnMouseButtonUp(ctrl)</span>

<h5 id="MouseClickHandled">
[MouseClickHandled] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлено новое сообщение <span class="example">SCI_SETMOUSECAPTURE</span> для ядра Scintilla, позволяющее менять реакцию на события от мыши.<br>
С его помощью можно сообщить ядру, что нажатие кнопки мыши обработано.<br>
Пример: <span class="example">SendEditor(SCI_SETMOUSECAPTURE, 0)</span> <br>
Такое сообщение теперь отправляется, если <span class="example">OnClick()</span> или <span class="example">OnDoubleClick()</span> возвращает <span class="example"><i>true</i></span>.

<h5 id="Perform">
[Perform] <span class=desc>(Автор: VladVRO)</span></h5>
В SciTE Lua Scripting Extension добавлена новая команда<br>
<span class="example">scite.Perform(actionList)</span> - исполняет команды <a href="SciTEDirector_rus.html">SciTE Director Interface</a><br>
где <span class="example">actionList</span> - одна или несколько команд разделенных символом новой строки.

<h5 id="ReloadStartupScript">
[ReloadStartupScript] <span class=desc>(Автор: VladVRO)</span></h5>
В SciTE Lua Scripting Extension добавлена новая команда<br>
<span class="example">scite.ReloadStartupScript()</span> - которая позволяет перезагрузить стартовый Луа скрипт

<h5 id="GetLexerLanguage">
[GetLexerLanguage] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Добавлено сообщение к Scitilla позволяющее получить имя текущего лексера:<br>
Теперь <span class="example">editor.LexerLanguage</span> - позволяет как установить лексер, так и получить текущий

<h5 id="GetWordChars">
<sup>new</sup>
[GetWordChars] <span class=desc>(Автор: Дмитрий Маслов, VladVRO)</span></h5>
Добавлено сообщение к Scitilla позволяющее получить текущий набор символов являющихся частью слов:<br>
Теперь <span class="example">editor.WordChars</span> - позволяет как задать набор, так и получить текущий

<h5 id="GetAPIPath">
[GetAPIPath] <span class=desc>(Автор: dB6)</span></h5>
APIPath - новая внутренняя переменная SciTE. Cодержит путь к текущему api файлу.

<h5 id="GetAbbrevPath">
[GetAbbrevPath] <span class=desc>(Автор: dB6)</span></h5>
AbbrevPath - новая внутренняя переменная SciTE. Cодержит путь к текущему abbrev файлу.

<h5 id="BufferNumber">
[BufferNumber] <span class=desc>(Автор: VladVRO)</span></h5>
BufferNumber - новая внутренняя переменная SciTE. Cодержит номер текущего буфера.

<h5 id="AbbrevRefactoring">
[AbbrevRefactoring] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
В SciTE Lua Scripting Extension добавлена новая команда<br>
<span class="example">InsertAbbreviation(string)</span><br>
где "<span class="example">string</span>" - это текст, по формату аналогичный сокращениям (abbrev), например:
<div class="example">scite.InsertAbbreviation("&lt;a href="|" title=""&gt;%SEL%&lt;/a&gt;")</div>


<h5 id="ParametersDialogFromLua">
[ParametersDialogFromLua] <span class=desc>(Автор: VladVRO)</span></h5>
В SciTE Lua Scripting Extension добавлена новая команда для вызова диалогового окна "Параметры" (Shift+F8)<br>
<span class="example">scite.ShowParametersDialog(text)</span><br>
где <span class="example">text</span> - короткий комментарий в окне параметров.<br>
Возвращает false если пользователь отказался (нажал отмену или Escape) иначе true.<br>
Пример:
<div class="example">
&nbsp;&nbsp;function Dialog()<br>
&nbsp;&nbsp;&nbsp;&nbsp;props["1"]=props["CurrentSelection"]<br>
&nbsp;&nbsp;&nbsp;&nbsp;props["2"]=props["SciteDefaultHome"]<br>
&nbsp;&nbsp;&nbsp;&nbsp;if scite.ShowParametersDialog("Please set params") then<br>
&nbsp;&nbsp;&nbsp;&nbsp;print ("1="..props["1"].."\n2="..props["2"].."\n3="..props["3"].."\n4="..props["4"])<br>
&nbsp;&nbsp;&nbsp;&nbsp;else<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print ("Cancel")<br>
&nbsp;&nbsp;&nbsp;&nbsp;end<br>
&nbsp;&nbsp;end
</div>

<h5 id="FileAttr in PROPS">
[FileAttr in PROPS] <span class=desc>(Автор: Midas)</span></h5>
Теперь из скриптов доступны дополнительные свойства файла<br>
<span class="example">FileAttr</span>, <span class="example">FileTime</span>, <span class="example">FileDate</span>.

<h5 id="CalltipBreaks">
[CalltipBreaks] <span class=desc>(Автор: Mitchell Foral)</span></h5>
Длинные всплывающие подсказки можно перенести на другую строку (добавлением символа \n в соответствующую строчку в api-файле)

<h5 id="Euphoria">
[Euphoria] <span class=desc>(Автор: M Duffy, Midas)</span></h5>
Добавлен новый лексер для языка <a href="http://www.rapideuphoria.com">Euphoria</a>

<h5 id="C_Word">
[C_Word] <span class=desc>(Автор: mimir)</span></h5>
Добавлено 3 новых класса ключевых слов для LexCpp (т.е. теперь можно задавать до 4х дополнительных наборов слов с разной подсветкой)

<h5 id="PropsKeysSets">
[PropsKeysSets] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлено 4 класса ключевых слов для лексера props.<br>
Tеперь можно задавать до 4х дополнительных наборов слов с разной подсветкой, причем слова могут содержать символ ~, означающий произвольный набор символов, например <span class="example">block.start.~</span> или <span class="example">braces.~.style</span>.<br>
В результате постоянная часть переменной будет выделена одним цветом, а переменная часть - другим.

<h5 id="PropsKeywords">
[PropsKeywords] <span class=desc>(Автор: VladVRO)</span></h5>
Добавлена подсветка для ключевых слов "import" и "if" в файлах .properties.

<h5 id="GetApplicationProps">
[GetApplicationProps] <span class=desc>(Автор: VladVRO)</span></h5>
Новая функция SciTEBase::GetProps() (для разработчиков) позволяет получить доступ к настройкам редактора в любом месте кода редактора.

<h5 id="Zoom">
[Zoom] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Теперь в функцию OnSendEditor передается событие SCI_SETZOOM, возникающее при изменении размера шрифта.

    <h3>
      <a name="3"></a>
      Устранение ошибок
    </h3>

<h5 id="ReloadsIfOldTime">
<sup>new</sup>
[Reloads if old time] <span class=desc>(Автор: UR4LTZ)</span></h5>
Если отредактированный файл был заменен первоначальной (более ранней по времени) версией, то SciTE не замечал подмены, несмотря на установку load.on.activate=1

<h5 id="ExtensionThreadFix">
[ExtensionThreadFix] <span class=desc>(Автор: qvaclav)</span></h5>
Исправлено ошибочное размножение запущенного скрипта Lua

<h5 id="PropsColouriseFix">
[PropsColouriseFix] <span class=desc>(Автор: VladVRO)</span></h5>
Исправлена подсветка синтаксиса в файлах настроек для длинных строк (более 1024 символов) и строк с символом переноса.

<h5 id="LuaLexerImprovement">
[LuaLexerImprovement] <span class=desc>(Автор: VladVRO)</span></h5>
Переделан лексер для языка Lua.<br>
Теперь символы ":" и "." обрабатываются в качестве разделителя сложного объекта. В настройках ключевых слов лексера как и ранее можно указывать слова вида <span class="example">string.sub</span> или <span class="example">editor:append</span>, и кроме того можно задать функции или поля объекта, например <span class="example">:GetText</span> или <span class="example">.Cursor</span>.

<h5 id="GoMessageImprovement">
[GoMessageImprovement] <span class=desc>(Автор: VladVRO)</span></h5>
Сделано перемещение фокуса в окно редактора после позиционирования на строке при клике мышкой в окне консоли на строке с ошибкой или результатом поиска.<br>
Использована доработка <span class="example">[OnMouseButtonUp]</span>.

<h5 id="fix_invalid_codepage">
[fix_invalid_codepage] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Исправлена ошибка при которой не работало переключение в кодировку по умолчанию, если параметр code.page был задан неверно. (<a href="http://code.google.com/p/scite-ru/issues/detail?id=49">подробности</a>)

<h5 id="English_KeyCode">
[English_KeyCode] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Исправлена ошибка при которой назначенные шорткаты переставали работать после переключения раскладки клавиатуры. (<a href="http://code.google.com/p/scite-ru/issues/detail?id=43">подробности</a>)

<h5 id="InputErr">
[InputErr] <span class=desc>(Автор: mimir)</span></h5>
Исправлена ошибка зависания SciTE при использовании <span class="example">command.input</span>.<br>
Если пользователь забыл выделить текст перед запуском скрипта, то SciTE зависал.

<h5 id="SelectionErr">
[SelectionErr] <span class=desc>(Автор: mimir)</span></h5>
Исправлена ошибка с выводом текста по <span class="example">command.input</span> и <span class="example">$(CurrentSelection)</span> исключительно в кодировке UTF-8.<br>
Это не позволяло передать русский текст во внешний скрипт или программу.

<h5 id="StyleDefault">
[StyleDefault] <span class=desc>(Автор: VladVRO, Дмитрий Маслов)</span></h5>
Убраны дефолтовые значения цвета символов (черный) и фона (белый), что позволяет не задавать их явно в файлах настройки во всех стилях для получения соответствующего фона при экспорте файла.<br>
Если в <span class="example">style.*.32</span> явно не задан цвет символов и фона, то эти параметры берутся из настроек Windows, т.е. равными системным Window Text/Background.

<h5 id="LowerUpperCase">
[LowerUpperCase] <span class=desc>(Автор: Midas, VladVRO)</span></h5>
Корректная работа с русскими символами<br>
- при переводе в нижний/верхний регистр,<br>
- при поиске без учета регистра<br>
- при поиске с использованием регулярных выражений

<h5 id="FindInFiles">
[FindInFiles] <span class=desc>(Автор: dB6)</span></h5>
Выделенный текст вставлялся в диалог поиска в файлах исключительно в кодировке UTF-8, поэтому русский текст превращался в "крякозяблы".

<h5 id="find_in_files_no_empty">
[find_in_files_no_empty] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Поиск текста в файлах теперь не запускается если в строку поиска ничего не ввели. (<a href="http://code.google.com/p/scite-ru/issues/detail?id=52">Issue 52</a>).

<h5 id="FileReaderUnlimitedLen">
[FileReaderUnlimitedLen] <span class=desc>(Автор: VladVRO)</span></h5>
Убрано ограничение на длину строк во встроенном поиске по файлам. Раньше в длинных строках поиск работал только до 1001 символа, все остальное в строке игнорировалось.

<h5 id="AbbrevFixCaretPos">
[AbbrevFixCaretPos] <span class=desc>(Автор: VladVRO, Дмитрий Маслов)</span></h5>
Исправлено позиционирование курсора при вставке сокращения (insert abbreviation).<br>
Ошибка возникала в случае если в теле сокращения был один символ '|' и не было выделенного текста во время вставки.<br>
Если в сокращении имелся символ \t то курсор так же позиционировался не верно.

<h5 id="no_wornings">
[no_wornings] <span class=desc>(Автор: Дмитрий Маслов)</span></h5>
Добавлена совместимость с компилятором Visual C++ 6.0<br>
Убраны причины некоторых предупреждений при компиляции в Visual C++ 6.0<br>
<span class="example">warning C4702: unreachable code</span>

<h5 id="SQLcase">
[SQLcase] <span class=desc>(Автор: mimir)</span></h5>
В LexSQL добавлено слово "case" для начала фолдинга

</body>
</html>

